var L=Object.defineProperty,P=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var R=(t,e,d)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):t[e]=d,j=(t,e)=>{for(var d in e||(e={}))B.call(e,d)&&R(t,d,e[d]);if(U)for(var d of U(e))N.call(e,d)&&R(t,d,e[d]);return t},D=(t,e)=>P(t,T(e));import{_ as q,m as z,c as l,a as o,t as b,w as g,v as h,b as E,e as A,h as F,q as O,F as c,r as x,s as I,d as m,o as a,u as f}from"./index.6e3bcd89.js";import"https://cdn.jsdelivr.net/npm/@feathersjs/client@5.0.0-pre.28/+esm";import"https://cdn.jsdelivr.net/npm/socket.io-client@4.5.1/+esm";const K={inject:["io"],methods:{toggle(){this.custom=!this.custom},async list(){let t=await this.io.service("types/any").find({query:{slug:this.type,$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});this.response=t,this.listRow()},async listRow(){let t={$or:[]};this.fields.forEach(d=>{if(this.instance.fields[d].type==="String"){let u={};u[d]={$regex:this.search},t.$or.push(u)}}),(!t.$or.length||!this.search)&&delete t.$or;let e=await this.io.service("types/"+this.type).find({query:D(j({},t),{$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}})});this.responseRow=e},async create(t){await this.io.service("types/"+this.type).create(t),this.clear(),this.list()},async save(t){await this.io.service("types/"+this.type).patch(t._id,t),this.list()},async remove(t){await this.io.service("types/"+this.type).remove(t._id),this.list()},clear(){this.obj={}}},computed:{instance(){var t;return((t=this.response)==null?void 0:t.data[0])||{}},fields(){var t,e;return(t=this.instance)!=null&&t.fields?Object.keys((e=this.instance)==null?void 0:e.fields):[]},table(){var t;return((t=this.responseRow)==null?void 0:t.data)||[]},content(){var t,e;if((t=this.response)!=null&&t.data){let d=(e=this.response.data[0])==null?void 0:e.dashboard,u=new TextDecoder().decode(d),y=URL.createObjectURL(new Blob([u],{type:"text/javascript"}));return z(()=>I(()=>import(y),[]))}return z(()=>{})}},data:()=>({obj:{},limit:25,page:1,response:null,responseRow:null,search:"",custom:!0}),props:{type:{type:String,default:"sites"}},created(){this.list()},watch:{type(){this.list()}}},H={style:{display:"flex",height:"100%","font-family":"Arial, Helvetica, sans-serif"}},M={style:{width:"100%","flex-grow":"1",flex:"1",height:"100%",overflow:"auto","background-color":"#edebebff"}},G={style:{"margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},J={style:{color:"#2b2b2bff"}},Q=m(),W=m(),X={key:0,style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"60px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#ebf2f5ff"}},Y=["disabled"],Z=["disabled"],$={key:1,style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#ffffffff"}},tt={key:2},et={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"60px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff"}},it={style:{display:"inline-block"}},ot=o("input",{style:{"margin-right":"5px"},placeholder:"id",readonly:""},null,-1),rt=["onUpdate:modelValue","placeholder"],st={style:{display:"inline-block",float:"right"}},dt={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff",position:"relative","text-align":"center"}},at={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#83b5c9ff",position:"relative"}},lt={style:{display:"inline-block",float:"right"}},nt=["onClick"],pt=["onClick"],gt=m(),ht={style:{display:"inline-block",width:"100%"}},ut={style:{"font-size":"13px",position:"absolute",top:"3px",color:"#1c1c1cff","font-weight":"bold"}},bt={style:{position:"absolute",top:"3px","font-size":"13px",right:"21px",color:"#1c1c1cff","font-weight":"bold"}},ct=["onUpdate:modelValue"],xt=["onUpdate:modelValue","placeholder"],mt=["onUpdate:modelValue","placeholder"],ft=["onUpdate:modelValue","placeholder"],yt=m(),vt={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff",position:"relative","text-align":"center"}};function _t(t,e,d,u,y,r){var v,_,k,w,C,V;return a(),l("div",H,[o("div",M,[o("div",G,[o("h2",J,b((_=(v=r.instance)==null?void 0:v.title)==null?void 0:_.en),1),Q,o("button",{type:"",onClick:e[0]||(e[0]=(...i)=>r.list&&r.list(...i)),style:{float:"right"}}," Refresh "),g(o("input",{style:{"margin-right":"5px",width:"167px",float:"right"},"onUpdate:modelValue":e[1]||(e[1]=i=>t.search=i),placeholder:"Filter",onKeydown:e[2]||(e[2]=E((...i)=>r.list&&r.list(...i),["enter"]))},null,544),[[h,t.search]])]),W,(w=(k=t.response)==null?void 0:k.data[0])!=null&&w.dashboard?(a(),l("div",X,[o("button",{type:"",onClick:e[3]||(e[3]=(...i)=>r.toggle&&r.toggle(...i)),disabled:t.custom}," Custom view ",8,Y),o("button",{type:"",onClick:e[4]||(e[4]=(...i)=>r.toggle&&r.toggle(...i)),disabled:!t.custom}," Default view ",8,Z)])):A("",!0),t.custom&&((V=(C=t.response)==null?void 0:C.data[0])==null?void 0:V.dashboard)?(a(),l("div",$,[(a(),F(O(r.content)))])):(a(),l("div",tt,[o("div",et,[o("div",it,[ot,(a(!0),l(c,null,x(r.fields,i=>g((a(),l("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":s=>t.obj[i]=s,placeholder:i},null,8,rt)),[[h,t.obj[i]]])),256))]),o("div",st,[o("button",{type:"",onClick:e[5]||(e[5]=i=>r.create(t.obj))}," Create ")])]),o("div",dt,[o("button",{type:"",onClick:e[6]||(e[6]=i=>(t.page--,r.list())),style:{float:"left"}}," Previous page "),o("span",null," Page "+b(t.page),1),o("button",{type:"",onClick:e[7]||(e[7]=i=>(t.page++,r.list())),style:{float:"right"}}," Next page ")]),(a(!0),l(c,null,x(r.table,i=>(a(),l("div",at,[o("div",lt,[o("button",{type:"",style:{"margin-right":"10px"},onClick:s=>r.save(i)}," Save ",8,nt),o("button",{type:"",onClick:s=>r.remove(i)}," Remove ",8,pt)]),gt,o("div",ht,[o("div",null,[o("span",ut," Created "+b(new Date(i.createdAt).toLocaleString()),1),o("span",bt," Updated "+b(new Date(i.updatedAt).toLocaleString()),1)]),g(o("input",{placeholder:"ID",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>i._id=s,readonly:""},null,8,ct),[[h,i._id]]),(a(!0),l(c,null,x(r.fields,s=>{var n;return g((a(),l("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":p=>i[s]=p,placeholder:s},null,8,xt)),[[h,i[s]],[f,(n=i[s])==null?void 0:n.en]])}),256)),(a(!0),l(c,null,x(r.fields,s=>{var n;return g((a(),l("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":p=>i[s]=p,placeholder:s},null,8,mt)),[[h,i[s]],[f,(n=i[s])==null?void 0:n.no]])}),256)),(a(!0),l(c,null,x(r.fields,s=>{var n,p;return g((a(),l("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":S=>i[s]=S,placeholder:s},null,8,ft)),[[h,i[s]],[f,!((n=i[s])!=null&&n.en)&&!((p=i[s])!=null&&p.no)]])}),256)),yt,A("",!0)])]))),256)),o("div",vt,[o("button",{type:"",onClick:e[8]||(e[8]=i=>(t.page--,r.list())),style:{float:"left"}}," Previous page "),o("span",null," Page "+b(t.page),1),o("button",{type:"",onClick:e[9]||(e[9]=i=>(t.page++,r.list())),style:{float:"right"}}," Next page ")])]))])])}var Ut=q(K,[["render",_t]]);export{Ut as default};
