import{_ as F,c as r,a as t,t as p,b as i,w as a,v as n,F as y,r as f,d as K,o as g,e as T,p as O,f as q}from"./index-906fdab1.js";const E={inject:["io","user"],methods:{async create(e){await this.io.service("users").create(e),this.clear(),this.list()},async list(){let e=await this.io.service("users").find({query:{email:{$search:this.search},$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});this.response=e},async save(e){let s=Object.assign({},e);if(s.password||delete s.password,s.password&&s.password.length<6){alert("Too short password!");return}let v=await this.io.service("users").patch(s._id,s);Object.assign(e,v)},async remove(e){await this.io.service("users").remove(e._id),this.list()},clear(){this.email="",this.owner_group="",this.password="",this.locale="",this.permissions=["user"]}},created(){this.list()},computed:{users(){var e;return((e=this.response)==null?void 0:e.data)||[]}},data:()=>({email:"",owner_group:"",password:"",locale:"",owner_group:"",permissions:["user"],response:null,search:"",limit:25,page:1})},b=e=>(O("data-v-40f00e56"),e=e(),q(),e),H={style:{display:"flex",height:"100%","font-family":"Arial, Helvetica, sans-serif"}},L={style:{width:"100%","flex-grow":"1",flex:"1",height:"100%",overflow:"auto","background-color":"#edebebff"},class:"editor"},G=b(()=>t("div",{style:{"margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},[t("h2",{style:{color:"#2b2b2bff","font-weight":"100","font-size":"35px"}}," Users ")],-1)),J={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"15px","padding-bottom":"15px","margin-left":"20px","margin-right":"20px","background-color":"#86a0b3ff",position:"relative","text-align":"center","margin-top":"10px","border-top-left-radius":"3px","border-top-right-radius":"3px"}},Q=["disabled"],W={style:{color:"#38454dff"}},X=["disabled"],Y={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#86a0b3ff","margin-bottom":"10px"},class:"row"},Z={style:{display:"inline-block"}},ee=b(()=>t("input",{placeholder:"ID",readonly:"readonly"},null,-1)),oe={style:{display:"inline-block"}},te={style:{"margin-right":"6px","margin-left":"5px"}},se=["onClick","disabled"],ie=["onUpdate:modelValue"],le=b(()=>t("input",{placeholder:"Updated",readonly:"readonly",style:{width:"185px",height:"29px"}},null,-1)),de=b(()=>t("input",{placeholder:"Created",readonly:"readonly",style:{width:"185px"}},null,-1)),ae={style:{display:"inline-block",float:"right"}},ne={style:{"box-sizing":"border-box","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","background-color":"#87acccff","border-top-left-radius":"3px","border-top-right-radius":"3px"},class:"row"},pe={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"0px","margin-bottom":"0px",position:"relative"},class:"row"},re={style:{display:"inline-block",float:"right"}},ge=["onClick","disabled"],me=["onClick"],he={style:{display:"inline-block"}},ue=["onUpdate:modelValue"],be=["onUpdate:modelValue"],ce=["onUpdate:modelValue"],ye={style:{display:"inline-block"}},fe={style:{"margin-right":"6px","margin-left":"5px"}},ve=["onClick","disabled"],we=["onUpdate:modelValue"],xe=["onClick"],_e=["onUpdate:modelValue"],ke=["onUpdate:modelValue"],Ue=["onUpdate:modelValue"],Ve=["onUpdate:modelValue"],Ce={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"10px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#86a0b3ff",position:"relative","text-align":"center"}},Ae=["disabled"],ze={style:{color:"#38454dff"}},Ie=["disabled"];function Se(e,s,v,Me,Ne,d){var w,x,_,k,U,V,C,A,z,I,S,M,N,$,D,P,j,B;return g(),r("div",H,[t("div",L,[G,t("div",null,[t("div",J,[t("button",{type:"",onClick:s[0]||(s[0]=o=>(e.page--,d.list())),style:{float:"left","margin-top":"-5px"},class:"dark",disabled:e.page<=1}," Previous page ",8,Q),t("span",W," Page "+p(e.page)+" of "+p(Math.ceil(((w=e.response)==null?void 0:w.total)/((x=e.response)==null?void 0:x.limit)))+" ("+p((_=e.response)==null?void 0:_.skip)+" - "+p(((k=e.response)==null?void 0:k.skip)+((V=(U=e.response)==null?void 0:U.data)==null?void 0:V.length))+" of "+p((C=e.response)==null?void 0:C.total)+") ",1),t("button",{type:"",onClick:s[1]||(s[1]=o=>(e.page++,d.list())),style:{float:"right","margin-top":"-5px"},class:"dark",disabled:e.page>=Math.ceil(((A=e.response)==null?void 0:A.total)/((z=e.response)==null?void 0:z.limit))}," Next page ",8,X)]),t("div",Y,[t("div",Z,[ee,i(),a(t("input",{placeholder:"email","onUpdate:modelValue":s[2]||(s[2]=o=>e.email=o)},null,512),[[n,e.email]]),i(),a(t("input",{placeholder:"password","onUpdate:modelValue":s[3]||(s[3]=o=>e.password=o),type:"password"},null,512),[[n,e.password]]),t("div",oe,[(g(!0),r(y,null,f(e.permissions,(o,m)=>(g(),r("div",te,[t("button",{onClick:h=>e.permissions.splice(m,1),style:{display:"inline-block"},disabled:e.permissions.length<=1}," Remove ",8,se),i(),a(t("input",{placeholder:"permissions","onUpdate:modelValue":h=>e.permissions[m]=h,style:{"margin-right":"5px"}},null,8,ie),[[n,e.permissions[m]]]),i(),!e.permissions.length||m===e.permissions.length-1?(g(),r("button",{key:0,onClick:s[4]||(s[4]=h=>e.permissions.push("")),style:{display:"inline-block"}}," Add ")):T("",!0)]))),256))]),i(),a(t("input",{placeholder:"locale","onUpdate:modelValue":s[5]||(s[5]=o=>e.locale=o)},null,512),[[n,e.locale]]),i(),a(t("input",{placeholder:"owner group","onUpdate:modelValue":s[6]||(s[6]=o=>e.owner_group=o)},null,512),[[n,e.owner_group]]),i(),le,i(),de]),t("div",ae,[t("button",{onClick:s[7]||(s[7]=o=>d.create({email:e.email,password:e.password,locale:e.locale,permissions:e.permissions,owner_group:e.owner_group}))}," Create ")])]),t("div",ne,[a(t("input",{style:{"margin-right":"5px",width:"calc(100% - 110px)","padding-top":"15px","padding-bottom":"15px"},"onUpdate:modelValue":s[8]||(s[8]=o=>e.search=o),placeholder:"search...",onKeydown:s[9]||(s[9]=K((...o)=>d.list&&d.list(...o),["enter"]))},null,544),[[n,e.search]]),i(),t("button",{onClick:s[10]||(s[10]=(...o)=>d.list&&d.list(...o)),class:"dark",style:{"padding-top":"15px","padding-bottom":"15px",width:"100px"}}," Search ")]),(g(!0),r(y,null,f(d.users,o=>{var m,h,R;return g(),r("div",pe,[t("div",re,[t("button",{onClick:l=>d.remove(o),class:"red",style:{"margin-right":"2px"},disabled:((h=(m=d.user)==null?void 0:m.value)==null?void 0:h._id)===o._id||((R=d.user)==null?void 0:R._id)===o._id}," Remove ",8,ge),i(),t("button",{onClick:l=>d.save(o),class:"green"}," Save ",8,me)]),t("div",he,[a(t("input",{placeholder:"ID","onUpdate:modelValue":l=>o._id=l,readonly:""},null,8,ue),[[n,o._id]]),i(),a(t("input",{placeholder:"email","onUpdate:modelValue":l=>o.email=l},null,8,be),[[n,o.email]]),i(),a(t("input",{placeholder:"password","onUpdate:modelValue":l=>o.password=l,type:"password"},null,8,ce),[[n,o.password]]),t("div",ye,[(g(!0),r(y,null,f(o.permissions,(l,u)=>(g(),r("div",fe,[t("button",{onClick:c=>o.permissions.splice(u,1),style:{display:"inline-block"},disabled:o.permissions.length<=1}," Remove ",8,ve),i(),a(t("input",{placeholder:"permissions","onUpdate:modelValue":c=>o.permissions[u]=c,style:{"margin-right":"5px"}},null,8,we),[[n,o.permissions[u]]]),i(),!o.permissions.length||u===o.permissions.length-1?(g(),r("button",{key:0,onClick:c=>o.permissions.push(""),style:{display:"inline-block"}}," Add ",8,xe)):T("",!0)]))),256))]),i(),a(t("input",{placeholder:"locale","onUpdate:modelValue":l=>o.locale=l},null,8,_e),[[n,o.locale]]),i(),a(t("input",{placeholder:"owner group","onUpdate:modelValue":l=>o.owner_group=l},null,8,ke),[[n,o.owner_group]]),i(),a(t("input",{placeholder:"Updated","onUpdate:modelValue":l=>o.updatedAt=l,readonly:"",style:{width:"185px"}},null,8,Ue),[[n,o.updatedAt]]),i(),a(t("input",{placeholder:"Created","onUpdate:modelValue":l=>o.createdAt=l,readonly:"",style:{width:"185px"}},null,8,Ve),[[n,o.createdAt]])])])}),256)),t("div",Ce,[t("button",{onClick:s[11]||(s[11]=o=>(e.page--,d.list())),style:{float:"left","margin-top":"-5px"},class:"dark",disabled:e.page<=1}," Previous page ",8,Ae),t("span",ze," Page "+p(e.page)+" of "+p(Math.ceil(((I=e.response)==null?void 0:I.total)/((S=e.response)==null?void 0:S.limit)))+" ("+p((M=e.response)==null?void 0:M.skip)+" - "+p(((N=e.response)==null?void 0:N.skip)+((D=($=e.response)==null?void 0:$.data)==null?void 0:D.length))+" of "+p((P=e.response)==null?void 0:P.total)+") ",1),t("button",{type:"",onClick:s[12]||(s[12]=o=>(e.page++,d.list())),style:{float:"right","margin-top":"-5px"},class:"dark",disabled:e.page>=Math.ceil(((j=e.response)==null?void 0:j.total)/((B=e.response)==null?void 0:B.limit))}," Next page ",8,Ie)])])])])}const De=F(E,[["render",Se],["__scopeId","data-v-40f00e56"]]);export{De as default};
