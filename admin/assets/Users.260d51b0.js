import{_ as x,c as n,a as t,w as l,v as r,b as y,F as c,r as b,t as m,d,o as p}from"./index.74e7eabc.js";import"https://cdn.jsdelivr.net/npm/@feathersjs/client@5.0.0-pre.28/+esm";import"https://cdn.jsdelivr.net/npm/socket.io-client@4.5.1/+esm";const f={inject:["io","user"],methods:{async create(o){await this.io.service("users").create(o),this.clear(),this.list()},async list(){let o=await this.io.service("users").find({query:{email:{$search:this.search},$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});this.response=o},async save(o){let i=Object.assign({},o);if(i.password||delete i.password,i.password&&i.password.length<6){alert("Too short password!");return}let h=await this.io.service("users").patch(i._id,i);Object.assign(o,h)},async remove(o){await this.io.service("users").remove(o._id),this.list()},clear(){this.email="",this.owner_group="",this.password="",this.locale="",this.permission=""}},created(){this.list()},computed:{users(){var o;return((o=this.response)==null?void 0:o.data)||[]}},data:()=>({email:"",owner_group:"",password:"",locale:"",owner_group:"",permission:"",response:null,search:"",limit:25,page:1})},w={style:{display:"flex",height:"100%","font-family":"Arial, Helvetica, sans-serif"}},v={style:{width:"100%","flex-grow":"1",flex:"1",height:"100%",overflow:"auto","background-color":"#edebebff"}},_={style:{"margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},k=t("h2",{style:{color:"#2b2b2bff"}}," Users ",-1),U=d(),V=d(),C={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"60px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff"}},z={style:{display:"inline-block"}},A={style:{display:"inline-block",float:"right"}},D={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#83b5c9ff",position:"relative"}},S={style:{display:"inline-block"}},$={style:{"font-size":"12px",position:"absolute",top:"5px",color:"#1c1c1cff"}},j={style:{position:"absolute",top:"5px","font-size":"12px",right:"21px",color:"#1c1c1cff"}},B=d(),F=["onUpdate:modelValue"],L=["onUpdate:modelValue"],N={style:{display:"inline-block",width:"223px"}},R=["onClick"],T=d(),K=["onUpdate:modelValue"],O=["onClick"],P=["onUpdate:modelValue"],q=["onUpdate:modelValue"],E=["onUpdate:modelValue"],H={style:{display:"inline-block",float:"right"}},M=["onClick"],G=["onClick","disabled"],I={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff",position:"relative","text-align":"center"}};function J(o,i,h,Q,W,a){return p(),n("div",w,[t("div",v,[t("div",_,[k,U,t("button",{type:"",onClick:i[0]||(i[0]=(...e)=>a.list&&a.list(...e)),style:{float:"right"}}," Refresh "),l(t("input",{style:{"margin-right":"5px",width:"167px",float:"right"},"onUpdate:modelValue":i[1]||(i[1]=e=>o.search=e),placeholder:"Filter",onKeydown:i[2]||(i[2]=y((...e)=>a.list&&a.list(...e),["enter"]))},null,544),[[r,o.search]])]),V,t("div",C,[t("div",z,[l(t("input",{placeholder:"email",style:{"margin-right":"5px"},"onUpdate:modelValue":i[3]||(i[3]=e=>o.email=e)},null,512),[[r,o.email]]),l(t("input",{placeholder:"password",style:{"margin-right":"5px"},type:"password","onUpdate:modelValue":i[4]||(i[4]=e=>o.password=e)},null,512),[[r,o.password]]),l(t("input",{placeholder:"permissions",style:{"margin-right":"5px"},"onUpdate:modelValue":i[5]||(i[5]=e=>o.permission=e)},null,512),[[r,o.permission]]),l(t("input",{placeholder:"locale",style:{"margin-right":"5px"},"onUpdate:modelValue":i[6]||(i[6]=e=>o.locale=e)},null,512),[[r,o.locale]]),l(t("input",{placeholder:"owner group",style:{"margin-right":"5px"},"onUpdate:modelValue":i[7]||(i[7]=e=>o.owner_group=e)},null,512),[[r,o.owner_group]])]),t("div",A,[t("button",{type:"",onClick:i[8]||(i[8]=e=>a.create({email:o.email,password:o.password,locale:o.locale,permissions:[o.permission],owner_group:o.owner_group}))}," Create ")])]),(p(!0),n(c,null,b(a.users,e=>(p(),n("div",D,[t("div",S,[t("div",null,[t("span",$," Created "+m(new Date(e.createdAt).toLocaleString()),1),t("span",j," Updated "+m(new Date(e.updatedAt).toLocaleString()),1)]),B,l(t("input",{placeholder:"email",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>e.email=s},null,8,F),[[r,e.email]]),l(t("input",{placeholder:"password",style:{"margin-right":"5px"},type:"password","onUpdate:modelValue":s=>e.password=s},null,8,L),[[r,e.password]]),t("div",N,[(p(!0),n(c,null,b(e.permissions,(s,g)=>(p(),n("div",null,[t("button",{type:"",onClick:u=>e.permissions.splice(g,1),style:{float:"left"}}," Remove ",8,R),T,l(t("input",{placeholder:"permissions","onUpdate:modelValue":u=>e.permissions[g]=u},null,8,K),[[r,e.permissions[g]]])]))),256))]),t("button",{type:"",onClick:s=>e.permissions.push(""),style:{"margin-right":"5px"}}," Add ",8,O),l(t("input",{placeholder:"locale",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>e.locale=s},null,8,P),[[r,e.locale]]),l(t("input",{placeholder:"owner group",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>e.owner_group=s},null,8,q),[[r,e.owner_group]]),l(t("input",{placeholder:"email",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>e._id=s,readonly:""},null,8,E),[[r,e._id]])]),t("div",H,[t("button",{type:"",style:{"margin-right":"10px"},onClick:s=>a.save(e)}," Save ",8,M),t("button",{type:"",onClick:s=>a.remove(e),disabled:a.user.value._id===e._id}," Remove ",8,G)])]))),256)),t("div",I,[t("button",{type:"",onClick:i[9]||(i[9]=e=>(o.page--,a.list())),style:{float:"left"}}," Previous page "),t("span",null," Page "+m(o.page),1),t("button",{type:"",onClick:i[10]||(i[10]=e=>(o.page++,a.list())),style:{float:"right"}}," Next page ")])])])}var ee=x(f,[["render",J]]);export{ee as default};
