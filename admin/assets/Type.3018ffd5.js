import{_ as P,m,c as s,a as i,t as g,w as c,v as h,b as T,e as k,h as y,q as _,i as V,F as b,r as x,s as v,d as f,o as n,u as w,k as D}from"./index.28b1a564.js";import"https://cdn.jsdelivr.net/npm/@feathersjs/client@5.0.0-pre.28/+esm";import"https://cdn.jsdelivr.net/npm/socket.io-client@4.5.1/+esm";console.log("look here",m);const B={inject:["io"],methods:{toggle(){this.custom=!this.custom},async list(){let t=await this.io.service("types/any").find({query:{slug:this.type,$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});this.response=t,this.listRow()},async listRow(){let t={$or:[]};this.fields.forEach(a=>{if(this.instance.fields[a].type==="String"){let u={};u[a]={$regex:this.search},t.$or.push(u)}}),(!t.$or.length||!this.search)&&delete t.$or;let o=await this.io.service("types/"+this.type).find({query:{...t,$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});this.responseRow=o},async create(t){await this.io.service("types/"+this.type).create(t),this.clear(),this.list()},async save(t){await this.io.service("types/"+this.type).patch(t._id,t),this.list()},async remove(t){await this.io.service("types/"+this.type).remove(t._id),this.list()},clear(){this.obj={}}},computed:{instance(){var t;return((t=this.response)==null?void 0:t.data[0])||{}},fields(){var t,o;return(t=this.instance)!=null&&t.fields?Object.keys((o=this.instance)==null?void 0:o.fields):[]},table(){var t;return((t=this.responseRow)==null?void 0:t.data)||[]},contentUrl(){var t,o,a;if((t=this.response)!=null&&t.data.length){let u=(a=(o=this.response)==null?void 0:o.data[0])==null?void 0:a.dashboard;return new TextDecoder().decode(u)}return""},loadedComponent(){console.log("loading component",this.contentUrl);let t=URL.createObjectURL(new Blob([this.contentUrl||""],{type:"text/javascript"}));console.log("url",t);let o=m(async()=>await v(()=>import(t),[]));return console.log("comp",o),o},demoA(){let t=URL.createObjectURL(new Blob([`
            export default {
                template: '<div>Hello AAA</div>'
            }
        `],{type:"text/javascript"}));return m(async()=>await v(()=>import(t),[]))},demoB(){return m(()=>new Promise(o=>{o({template:"<div>I am async!</div>"})}))}},data:()=>({obj:{},limit:25,page:1,response:null,responseRow:null,search:"",custom:!0}),props:{type:{type:String,default:"sites"}},created(){this.list()},watch:{type(){this.list()}},components:{demoC:m(()=>new Promise(t=>{t({template:"<div>I am async! yup</div>"})})),demoD:m(async()=>await v(()=>import(URL.createObjectURL(new Blob([`
            export default {
                template: '<div>Hello DDD</div>'
            }
        `],{type:"text/javascript"}))),[]))}},E={style:{display:"flex",height:"100%","font-family":"Arial, Helvetica, sans-serif"}},S={style:{width:"100%","flex-grow":"1",flex:"1",height:"100%",overflow:"auto","background-color":"#edebebff"}},z={style:{"margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},I={style:{color:"#2b2b2bff"}},N=f(),O=f(),q={key:0,style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"60px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#ebf2f5ff"}},F=["disabled"],H=["disabled"],K={key:1,style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#ffffffff"}},G=f(),M=i("span",null," TESTINGS ",-1),J={key:2},Q={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"60px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff"}},W={style:{display:"inline-block"}},X=i("input",{style:{"margin-right":"5px"},placeholder:"id",readonly:""},null,-1),Y=["onUpdate:modelValue","placeholder"],Z={style:{display:"inline-block",float:"right"}},$={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff",position:"relative","text-align":"center"}},tt={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#83b5c9ff",position:"relative"}},et={style:{display:"inline-block",float:"right"}},ot=["onClick"],it=["onClick"],rt=f(),lt={style:{display:"inline-block",width:"100%"}},nt={style:{"font-size":"13px",position:"absolute",top:"3px",color:"#1c1c1cff","font-weight":"bold"}},st={style:{position:"absolute",top:"3px","font-size":"13px",right:"21px",color:"#1c1c1cff","font-weight":"bold"}},dt=["onUpdate:modelValue"],at=["onUpdate:modelValue","placeholder"],pt=["onUpdate:modelValue","placeholder"],gt=["onUpdate:modelValue","placeholder"],ct=f(),ht={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff",position:"relative","text-align":"center"}};function mt(t,o,a,u,R,r){var C,U;const A=D("demoC"),j=D("demoD");return n(),s("div",E,[i("div",S,[i("div",z,[i("h2",I,g((U=(C=r.instance)==null?void 0:C.title)==null?void 0:U.en),1),N,i("button",{type:"",onClick:o[0]||(o[0]=(...e)=>r.list&&r.list(...e)),style:{float:"right"}}," Refresh "),c(i("input",{style:{"margin-right":"5px",width:"167px",float:"right"},"onUpdate:modelValue":o[1]||(o[1]=e=>t.search=e),placeholder:"Filter",onKeydown:o[2]||(o[2]=T((...e)=>r.list&&r.list(...e),["enter"]))},null,544),[[h,t.search]])]),O,r.contentUrl?(n(),s("div",q,[i("button",{type:"",onClick:o[3]||(o[3]=(...e)=>r.toggle&&r.toggle(...e)),disabled:t.custom}," Custom view ",8,F),i("button",{type:"",onClick:o[4]||(o[4]=(...e)=>r.toggle&&r.toggle(...e)),disabled:!t.custom}," Default view ",8,H)])):k("",!0),t.custom&&r.contentUrl?(n(),s("div",K,[i("div",null,g(r.contentUrl),1),G,(n(),y(_(r.loadedComponent))),(n(),y(_(r.demoA))),(n(),y(_(r.demoB))),V(A),V(j),M])):(n(),s("div",J,[i("div",Q,[i("div",W,[X,(n(!0),s(b,null,x(r.fields,e=>c((n(),s("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":l=>t.obj[e]=l,placeholder:e},null,8,Y)),[[h,t.obj[e]]])),256))]),i("div",Z,[i("button",{type:"",onClick:o[5]||(o[5]=e=>r.create(t.obj))}," Create ")])]),i("div",$,[i("button",{type:"",onClick:o[6]||(o[6]=e=>(t.page--,r.list())),style:{float:"left"}}," Previous page "),i("span",null," Page "+g(t.page),1),i("button",{type:"",onClick:o[7]||(o[7]=e=>(t.page++,r.list())),style:{float:"right"}}," Next page ")]),(n(!0),s(b,null,x(r.table,e=>(n(),s("div",tt,[i("div",et,[i("button",{type:"",style:{"margin-right":"10px"},onClick:l=>r.save(e)}," Save ",8,ot),i("button",{type:"",onClick:l=>r.remove(e)}," Remove ",8,it)]),rt,i("div",lt,[i("div",null,[i("span",nt," Created "+g(new Date(e.createdAt).toLocaleString()),1),i("span",st," Updated "+g(new Date(e.updatedAt).toLocaleString()),1)]),c(i("input",{placeholder:"ID",style:{"margin-right":"5px"},"onUpdate:modelValue":l=>e._id=l,readonly:""},null,8,dt),[[h,e._id]]),(n(!0),s(b,null,x(r.fields,l=>{var d;return c((n(),s("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":p=>e[l]=p,placeholder:l},null,8,at)),[[h,e[l]],[w,(d=e[l])==null?void 0:d.en]])}),256)),(n(!0),s(b,null,x(r.fields,l=>{var d;return c((n(),s("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":p=>e[l]=p,placeholder:l},null,8,pt)),[[h,e[l]],[w,(d=e[l])==null?void 0:d.no]])}),256)),(n(!0),s(b,null,x(r.fields,l=>{var d,p;return c((n(),s("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":L=>e[l]=L,placeholder:l},null,8,gt)),[[h,e[l]],[w,!((d=e[l])!=null&&d.en)&&!((p=e[l])!=null&&p.no)]])}),256)),ct,k("",!0)])]))),256)),i("div",ht,[i("button",{type:"",onClick:o[8]||(o[8]=e=>(t.page--,r.list())),style:{float:"left"}}," Previous page "),i("span",null," Page "+g(t.page),1),i("button",{type:"",onClick:o[9]||(o[9]=e=>(t.page++,r.list())),style:{float:"right"}}," Next page ")])]))])])}const ft=P(B,[["render",mt]]);export{ft as default};
