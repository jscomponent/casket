var z=Object.defineProperty,j=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var k=(t,e,d)=>e in t?z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):t[e]=d,w=(t,e)=>{for(var d in e||(e={}))R.call(e,d)&&k(t,d,e[d]);if(_)for(var d of _(e))S.call(e,d)&&k(t,d,e[d]);return t},C=(t,e)=>j(t,D(e));import{_ as T,c as a,a as o,t as b,w as g,v as h,b as A,e as V,F as u,r as c,d as x,o as l,m as f}from"./index.3ffb4328.js";import"https://cdn.jsdelivr.net/npm/@feathersjs/client@5.0.0-pre.28/+esm";import"https://cdn.jsdelivr.net/npm/socket.io-client@4.5.1/+esm";const L={inject:["io"],methods:{toggle(){this.custom=!this.custom},async list(){var e;let t=await this.io.service("types/any").find({query:{slug:this.type,$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});this.response=t,(e=t==null?void 0:t.data[0])!=null&&e.dashboard?this.dashboard=new TextDecoder().decode(t.data[0].dashboard):this.dashboard="",this.listRow()},async listRow(){let t={$or:[]};this.fields.forEach(d=>{if(this.instance.fields[d].type==="String"){let m={};m[d]={$regex:this.search},t.$or.push(m)}}),(!t.$or.length||!this.search)&&delete t.$or;let e=await this.io.service("types/"+this.type).find({query:C(w({},t),{$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}})});this.responseRow=e},async create(t){await this.io.service("types/"+this.type).create(t),this.clear(),this.list()},async save(t){await this.io.service("types/"+this.type).patch(t._id,t),this.list()},async remove(t){await this.io.service("types/"+this.type).remove(t._id),this.list()},clear(){this.obj={}}},computed:{instance(){var t;return((t=this.response)==null?void 0:t.data[0])||{}},fields(){var t,e;return(t=this.instance)!=null&&t.fields?Object.keys((e=this.instance)==null?void 0:e.fields):[]},table(){var t;return((t=this.responseRow)==null?void 0:t.data)||[]}},data:()=>({obj:{},limit:25,page:1,response:null,responseRow:null,search:"",dashboard:"",custom:!0}),props:{type:{type:String,default:"customers"}},created(){this.list()},watch:{type(){this.list()}}},N={style:{display:"flex",height:"100%","font-family":"Arial, Helvetica, sans-serif"}},P={style:{width:"100%","flex-grow":"1",flex:"1",height:"100%",overflow:"auto","background-color":"#edebebff"}},q={style:{"margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},B={style:{color:"#2b2b2bff"}},F=x(),H=x(),M={key:0,style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"60px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#ebf2f5ff"}},E=["disabled"],K=["disabled"],I={key:1,style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#ffffffff"}},O=["innerHTML"],$={key:2},G={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"60px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff"}},J={style:{display:"inline-block"}},Q=o("input",{style:{"margin-right":"5px"},placeholder:"id",readonly:""},null,-1),W=["onUpdate:modelValue","placeholder"],X={style:{display:"inline-block",float:"right"}},Y={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff",position:"relative","text-align":"center"}},Z={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#83b5c9ff",position:"relative"}},tt={style:{display:"inline-block",float:"right"}},et=["onClick"],it=["onClick"],ot=x(),rt={style:{display:"inline-block",width:"100%"}},st={style:{"font-size":"13px",position:"absolute",top:"3px",color:"#1c1c1cff","font-weight":"bold"}},dt={style:{position:"absolute",top:"3px","font-size":"13px",right:"21px",color:"#1c1c1cff","font-weight":"bold"}},at=["onUpdate:modelValue"],lt=["onUpdate:modelValue","placeholder"],nt=["onUpdate:modelValue","placeholder"],pt=["onUpdate:modelValue","placeholder"],gt=x(),ht={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff",position:"relative","text-align":"center"}};function bt(t,e,d,m,ut,r){var y,v;return l(),a("div",N,[o("div",P,[o("div",q,[o("h2",B,b((v=(y=r.instance)==null?void 0:y.title)==null?void 0:v.en),1),F,o("button",{type:"",onClick:e[0]||(e[0]=(...i)=>r.list&&r.list(...i)),style:{float:"right"}}," Refresh "),g(o("input",{style:{"margin-right":"5px",width:"167px",float:"right"},"onUpdate:modelValue":e[1]||(e[1]=i=>t.search=i),placeholder:"Filter",onKeydown:e[2]||(e[2]=A((...i)=>r.list&&r.list(...i),["enter"]))},null,544),[[h,t.search]])]),H,t.dashboard?(l(),a("div",M,[o("button",{type:"",onClick:e[3]||(e[3]=(...i)=>r.toggle&&r.toggle(...i)),disabled:t.custom}," Custom view ",8,E),o("button",{type:"",onClick:e[4]||(e[4]=(...i)=>r.toggle&&r.toggle(...i)),disabled:!t.custom}," Default view ",8,K)])):V("",!0),t.custom&&t.dashboard?(l(),a("div",I,[o("div",{innerHTML:t.dashboard},null,8,O)])):(l(),a("div",$,[o("div",G,[o("div",J,[Q,(l(!0),a(u,null,c(r.fields,i=>g((l(),a("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":s=>t.obj[i]=s,placeholder:i},null,8,W)),[[h,t.obj[i]]])),256))]),o("div",X,[o("button",{type:"",onClick:e[5]||(e[5]=i=>r.create(t.obj))}," Create ")])]),o("div",Y,[o("button",{type:"",onClick:e[6]||(e[6]=i=>(t.page--,r.list())),style:{float:"left"}}," Previous page "),o("span",null," Page "+b(t.page),1),o("button",{type:"",onClick:e[7]||(e[7]=i=>(t.page++,r.list())),style:{float:"right"}}," Next page ")]),(l(!0),a(u,null,c(r.table,i=>(l(),a("div",Z,[o("div",tt,[o("button",{type:"",style:{"margin-right":"10px"},onClick:s=>r.save(i)}," Save ",8,et),o("button",{type:"",onClick:s=>r.remove(i)}," Remove ",8,it)]),ot,o("div",rt,[o("div",null,[o("span",st," Created "+b(new Date(i.createdAt).toLocaleString()),1),o("span",dt," Updated "+b(new Date(i.updatedAt).toLocaleString()),1)]),g(o("input",{placeholder:"ID",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>i._id=s,readonly:""},null,8,at),[[h,i._id]]),(l(!0),a(u,null,c(r.fields,s=>{var n;return g((l(),a("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":p=>i[s]=p,placeholder:s},null,8,lt)),[[h,i[s]],[f,(n=i[s])==null?void 0:n.en]])}),256)),(l(!0),a(u,null,c(r.fields,s=>{var n;return g((l(),a("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":p=>i[s]=p,placeholder:s},null,8,nt)),[[h,i[s]],[f,(n=i[s])==null?void 0:n.no]])}),256)),(l(!0),a(u,null,c(r.fields,s=>{var n,p;return g((l(),a("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":U=>i[s]=U,placeholder:s},null,8,pt)),[[h,i[s]],[f,!((n=i[s])!=null&&n.en)&&!((p=i[s])!=null&&p.no)]])}),256)),gt,V("",!0)])]))),256)),o("div",ht,[o("button",{type:"",onClick:e[8]||(e[8]=i=>(t.page--,r.list())),style:{float:"left"}}," Previous page "),o("span",null," Page "+b(t.page),1),o("button",{type:"",onClick:e[9]||(e[9]=i=>(t.page++,r.list())),style:{float:"right"}}," Next page ")])]))])])}var yt=T(L,[["render",bt]]);export{yt as default};
