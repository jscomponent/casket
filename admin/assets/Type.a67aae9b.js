import{_ as V,m as C,c as l,a as o,t as c,w as g,v as h,b as U,e as k,h as R,q as j,F as b,r as m,s as D,d as x,o as d,u as y}from"./index.17a184c5.js";import"https://cdn.jsdelivr.net/npm/@feathersjs/client@5.0.0-pre.28/+esm";import"https://cdn.jsdelivr.net/npm/socket.io-client@4.5.1/+esm";console.log("look here",C);const z={inject:["io"],methods:{toggle(){this.custom=!this.custom},async list(){let t=await this.io.service("types/any").find({query:{slug:this.type,$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});this.response=t,this.listRow()},async listRow(){let t={$or:[]};this.fields.forEach(a=>{var u;if(((u=this.keys[a])==null?void 0:u.type)==="String"){let f={};f[a]={$regex:this.search},t.$or.push(f)}}),(!t.$or.length||!this.search)&&delete t.$or;let i=await this.io.service("types/"+this.type).find({query:{...t,$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});this.responseRow=i},async create(t){await this.io.service("types/"+this.type).create(t),this.clear(),this.list()},async save(t){await this.io.service("types/"+this.type).patch(t._id,t),this.list()},async remove(t){await this.io.service("types/"+this.type).remove(t._id),this.list()},clear(){this.obj={}}},computed:{instance(){var t;return((t=this.response)==null?void 0:t.data[0])||{}},fields(){var t,i;return(t=this.instance)!=null&&t.fields&&(this.keys=(i=this.instance)==null?void 0:i.fields),Object.keys(this.keys)},table(){var t;return((t=this.responseRow)==null?void 0:t.data)||[]},decodedContent(){var t,i,a;if((t=this.response)!=null&&t.data.length){let u=(a=(i=this.response)==null?void 0:i.data[0])==null?void 0:a.dashboard;return new TextDecoder().decode(u)}return""},loadedComponent(){let t=URL.createObjectURL(new Blob([this.decodedContent],{type:"text/javascript"}));return C(async()=>await D(()=>import(t),[]))}},data:()=>({keys:[],obj:{},limit:25,page:1,response:null,responseRow:null,search:"",custom:!0}),props:{type:{type:String,default:"sites"}},created(){this.list()},watch:{type(){this.list()}}},A={style:{display:"flex",height:"100%","font-family":"Arial, Helvetica, sans-serif"}},S={style:{width:"100%","flex-grow":"1",flex:"1",height:"100%",overflow:"auto","background-color":"#edebebff"}},L={style:{"margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},P={style:{color:"#2b2b2bff"}},T=x(),B=x(),N={key:0,style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"60px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#ebf2f5ff"}},q=["disabled"],E=["disabled"],F={key:1,style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#ffffffff"}},O={key:2},I={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"60px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff"}},K={style:{display:"inline-block"}},H=o("input",{style:{"margin-right":"5px"},placeholder:"id",readonly:""},null,-1),M=["onUpdate:modelValue","placeholder"],G={style:{display:"inline-block",float:"right"}},J={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff",position:"relative","text-align":"center"}},Q={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#83b5c9ff",position:"relative"}},W={style:{display:"inline-block",float:"right"}},X=["onClick"],Y=["onClick"],Z=x(),$={style:{display:"inline-block",width:"100%"}},tt={style:{"font-size":"13px",position:"absolute",top:"3px",color:"#1c1c1cff","font-weight":"bold"}},et={style:{position:"absolute",top:"3px","font-size":"13px",right:"21px",color:"#1c1c1cff","font-weight":"bold"}},it=["onUpdate:modelValue"],ot=["onUpdate:modelValue","placeholder"],rt=["onUpdate:modelValue","placeholder"],st=["onUpdate:modelValue","placeholder"],dt=x(),lt={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff",position:"relative","text-align":"center"}};function nt(t,i,a,u,f,r){var _,v;return d(),l("div",A,[o("div",S,[o("div",L,[o("h2",P,c((v=(_=r.instance)==null?void 0:_.title)==null?void 0:v.en),1),T,o("button",{type:"",onClick:i[0]||(i[0]=(...e)=>r.list&&r.list(...e)),style:{float:"right"}}," Refresh "),g(o("input",{style:{"margin-right":"5px",width:"167px",float:"right"},"onUpdate:modelValue":i[1]||(i[1]=e=>t.search=e),placeholder:"Filter",onKeydown:i[2]||(i[2]=U((...e)=>r.list&&r.list(...e),["enter"]))},null,544),[[h,t.search]])]),B,r.decodedContent?(d(),l("div",N,[o("button",{type:"",onClick:i[3]||(i[3]=(...e)=>r.toggle&&r.toggle(...e)),disabled:t.custom}," Custom view ",8,q),o("button",{type:"",onClick:i[4]||(i[4]=(...e)=>r.toggle&&r.toggle(...e)),disabled:!t.custom}," Default view ",8,E)])):k("",!0),t.custom&&r.decodedContent?(d(),l("div",F,[(d(),R(j(r.loadedComponent)))])):(d(),l("div",O,[o("div",I,[o("div",K,[H,(d(!0),l(b,null,m(r.fields,e=>g((d(),l("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":s=>t.obj[e]=s,placeholder:e},null,8,M)),[[h,t.obj[e]]])),256))]),o("div",G,[o("button",{type:"",onClick:i[5]||(i[5]=e=>r.create(t.obj))}," Create ")])]),o("div",J,[o("button",{type:"",onClick:i[6]||(i[6]=e=>(t.page--,r.list())),style:{float:"left"}}," Previous page "),o("span",null," Page "+c(t.page),1),o("button",{type:"",onClick:i[7]||(i[7]=e=>(t.page++,r.list())),style:{float:"right"}}," Next page ")]),(d(!0),l(b,null,m(r.table,e=>(d(),l("div",Q,[o("div",W,[o("button",{type:"",style:{"margin-right":"10px"},onClick:s=>r.save(e)}," Save ",8,X),o("button",{type:"",onClick:s=>r.remove(e)}," Remove ",8,Y)]),Z,o("div",$,[o("div",null,[o("span",tt," Created "+c(new Date(e.createdAt).toLocaleString()),1),o("span",et," Updated "+c(new Date(e.updatedAt).toLocaleString()),1)]),g(o("input",{placeholder:"ID",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>e._id=s,readonly:""},null,8,it),[[h,e._id]]),(d(!0),l(b,null,m(r.fields,s=>{var n;return g((d(),l("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":p=>e[s]=p,placeholder:s},null,8,ot)),[[h,e[s]],[y,(n=e[s])==null?void 0:n.en]])}),256)),(d(!0),l(b,null,m(r.fields,s=>{var n;return g((d(),l("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":p=>e[s]=p,placeholder:s},null,8,rt)),[[h,e[s]],[y,(n=e[s])==null?void 0:n.no]])}),256)),(d(!0),l(b,null,m(r.fields,s=>{var n,p;return g((d(),l("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":w=>e[s]=w,placeholder:s},null,8,st)),[[h,e[s]],[y,!((n=e[s])!=null&&n.en)&&!((p=e[s])!=null&&p.no)]])}),256)),dt,k("",!0)])]))),256)),o("div",lt,[o("button",{type:"",onClick:i[8]||(i[8]=e=>(t.page--,r.list())),style:{float:"left"}}," Previous page "),o("span",null," Page "+c(t.page),1),o("button",{type:"",onClick:i[9]||(i[9]=e=>(t.page++,r.list())),style:{float:"right"}}," Next page ")])]))])])}const ht=V(z,[["render",nt]]);export{ht as default};
