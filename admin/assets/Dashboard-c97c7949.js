import{_ as k,o as n,c as a,F as y,r as b,a as o,e as h,b as f,t as m,n as x,p as $,f as C,w as N,g as S,h as _,i as w,j as B,k as D}from"./index-b82fdb5d.js";const z={data:()=>({pages:[{label:"Users",path:"/admin/users"},{label:"Settings",path:"/admin/settings"},{label:"Server",path:"/admin/server"}],types:[]}),computed:{current(){return this.$route.path}},inject:["io"],methods:{async list(){let e=await this.io.service("types/any").find({query:{$limit:100,$sort:{title:"asc"}}});this.types=e.data},async add(){let e=prompt("Slug");e&&(await this.io.service("types/any").create({title:e,slug:e}),this.$emit("list"))}},created(){this.list()},props:{renderkey:{type:Number,default:42}},watch:{renderkey(){console.log("to the edge"),this.list()}}},g=e=>($("data-v-9e13976a"),e=e(),C(),e),V={class:"w-44 h-full text-slate-100 bg-gradient-to-br from-slate-800 bg-slate-700"},I=["onClick"],L={key:0,style:{"background-color":"#edebebff",width:"10px",position:"absolute",right:"0px","clip-path":"polygon(100% 0%, 100% 100%, 0% 50%)",top:"13px",height:"20px"}},T=g(()=>o("div",null,null,-1)),U=g(()=>o("hr",{style:{"border-color":"#3b517dff","border-top-width":"3px"}},null,-1)),j=["onClick"],A={key:0,style:{"background-color":"#edebebff",width:"10px",position:"absolute",right:"0px","clip-path":"polygon(100% 0%, 100% 100%, 0% 50%)",top:"9px",height:"20px"}},F=g(()=>o("div",null,null,-1)),q=g(()=>o("div",null,null,-1));function E(e,s,v,d,p,t){return n(),a("div",V,[(n(!0),a(y,null,b(e.pages,i=>(n(),a("div",null,[o("div",{style:{"box-sizing":"border-box","padding-left":"10px","padding-right":"10px","padding-top":"10px","padding-bottom":"10px",position:"relative"},class:x(["menu-button",i.path===t.current?"active":""]),onClick:l=>e.$router.push(i.path)},[i.path===t.current?(n(),a("div",L)):h("",!0),f(" "+m(i.label),1)],10,I),T]))),256)),U,(n(!0),a(y,null,b(e.types,i=>(n(),a("div",null,[o("div",{style:{"box-sizing":"border-box","padding-left":"10px","padding-right":"10px","padding-top":"10px","padding-bottom":"10px",position:"relative"},class:x(["menu-button","/admin/types/"+i.slug===t.current?"active":""]),onClick:l=>e.$router.push("/admin/types/"+i.slug)},["/admin/types/"+i.slug===t.current?(n(),a("div",A)):h("",!0),f(" "+m(i.title.en),1)],10,j),F]))),256)),o("div",null,[o("div",{style:{"box-sizing":"border-box","padding-left":"10px","padding-right":"10px","padding-top":"10px","padding-bottom":"10px",position:"relative"},class:"menu-button",onClick:s[0]||(s[0]=i=>t.add())}," + Add "),q])])}const M=k(z,[["render",E],["__scopeId","data-v-9e13976a"]]),G={data:()=>({domains:[],current:""}),inject:["io","user","userUpdate"],methods:{async logout(){await this.io.logout(),this.userUpdate(null),this.$router.push("/")},async getDomains(){var e,s;this.domains=await this.io.service("types/domains").find().catch(v=>{var d,p,t;this.domains={data:[{match:(t=(p=(d=this.io)==null?void 0:d.io)==null?void 0:p.io)==null?void 0:t.uri}]}}),(s=(e=this.domains)==null?void 0:e.data)!=null&&s.length&&(this.current=this.domains.data[0].match)},open(){window.open("https://"+this.current,"_blank")}},created(){this.getDomains()}},H={class:"block text-slate-100 bg-gradient-to-br from-slate-800 bg-slate-700 py-1"},J=o("h3",{class:"font-bold inline-block p-2"}," Airportal ",-1),K=["value"],O={class:"float-right"};function P(e,s,v,d,p,t){var i,l,u,c;return n(),a("div",H,[J,N(o("select",{name:"",onChange:s[0]||(s[0]=r=>t.open()),"onUpdate:modelValue":s[1]||(s[1]=r=>e.current=r),class:"px-2 py-1 ml-2 w-44"},[(n(!0),a(y,null,b((i=e.domains)==null?void 0:i.data,r=>(n(),a("option",{value:r.match},m(r.match),9,K))),256))],544),[[S,e.current]]),o("div",O,[o("button",{onClick:s[2]||(s[2]=r=>e.$router.push("/admin/profile")),class:"hover:text-sky-300 link"},m(((u=(l=t.user)==null?void 0:l.value)==null?void 0:u.email)||((c=t.user)==null?void 0:c.email))+" - ",1),f(),o("button",{class:"p-2 hover:text-sky-300 link",onClick:s[3]||(s[3]=(...r)=>t.logout&&t.logout(...r))}," Log out ")])])}const Q=k(G,[["render",P]]);const R={components:{Navigation:M,TopBar:Q},props:["min"],computed:{minimal(){return this.min||!1},rerender(){return this.renderkey}},data:()=>({renderkey:1}),methods:{refresh(){this.renderkey=this.renderkey+1,this.$emit("list")}},emits:["list"]},W={style:{height:"100%",width:"100%"}},X={style:{width:"100%",height:"100%",overflow:"auto",position:"relative",flex:"1"}};function Y(e,s,v,d,p,t){const i=_("TopBar"),l=_("Navigation"),u=_("router-view");return n(),a("div",W,[t.minimal?h("",!0):(n(),w(i,{key:0,style:{width:"100%"}})),o("div",{style:D([{display:"flex"},t.minimal?"height:100%":"height:calc(100% - 30px)"])},[t.minimal?h("",!0):(n(),w(l,{key:0,path:"/admin/services",renderkey:t.minimal?"":e.renderkey,onList:s[0]||(s[0]=c=>t.refresh())},null,8,["renderkey"])),o("div",X,[B(u,{style:{width:"100%",height:"100%",overflow:"auto","background-color":"#edebebff",position:"absolute"},min:!0,onList:s[1]||(s[1]=c=>t.refresh())})])],4)])}const ee=k(R,[["render",Y]]);export{ee as default};
