import{_ as K,c as r,a as s,t as p,b as i,w as a,v as n,F as v,r as w,d as q,o as g,e as F,p as E,f as H}from"./index-1a143290.js";const L={inject:["io","user"],methods:{async create(e){const t=await this.io.service("users").create(e);this.clear(),this.response.data.unshift(t)},async list(){let e=await this.io.service("users").find({query:{email:{$search:this.search},$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});this.response=e},async save(e){let t=Object.assign({},e);if(t.password||delete t.password,t.password&&t.password.length<6){alert("Too short password!");return}let u=await this.io.service("users").patch(t._id,t);this.response.data=this.response.data.map(y=>y._id!==u._id?y:u)},async remove(e){const t=await this.io.service("users").remove(e._id);this.response.data=this.response.data.filter(u=>u._id!==t._id)},clear(){this.email="",this.owner_group="",this.password="",this.locale="",this.permissions=["user"]}},created(){this.list()},computed:{users(){var e;return((e=this.response)==null?void 0:e.data)||[]}},data:()=>({email:"",owner_group:"",password:"",locale:"",owner_group:"",permissions:["user"],response:null,search:"",limit:25,page:1})},b=e=>(E("data-v-d427c2d6"),e=e(),H(),e),O={style:{display:"flex",height:"100%","font-family":"Arial, Helvetica, sans-serif"}},G={style:{width:"100%","flex-grow":"1",flex:"1",height:"100%",overflow:"auto","background-color":"#edebebff"},class:"editor"},J=b(()=>s("div",{style:{"margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},[s("h2",{style:{color:"#2b2b2bff","font-weight":"100","font-size":"35px"}}," Users ")],-1)),Q={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"15px","padding-bottom":"15px","margin-left":"20px","margin-right":"20px","background-color":"#86a0b3ff",position:"relative","text-align":"center","margin-top":"10px","border-top-left-radius":"3px","border-top-right-radius":"3px"}},W=["disabled"],X={style:{color:"#38454dff"}},Y=["disabled"],Z={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#86a0b3ff","margin-bottom":"10px"},class:"row"},ee={style:{display:"inline-block"}},oe=b(()=>s("input",{placeholder:"ID",readonly:"readonly"},null,-1)),se={style:{display:"inline-block"}},te={style:{"margin-right":"6px","margin-left":"5px"}},ie=["onClick","disabled"],le=["onUpdate:modelValue"],de=b(()=>s("input",{placeholder:"Updated",readonly:"readonly",style:{width:"185px",height:"29px"}},null,-1)),ae=b(()=>s("input",{placeholder:"Created",readonly:"readonly",style:{width:"185px"}},null,-1)),ne={style:{display:"inline-block",float:"right"}},pe={style:{"box-sizing":"border-box","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","background-color":"#87acccff","border-top-left-radius":"3px","border-top-right-radius":"3px"},class:"row"},re={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"0px","margin-bottom":"0px",position:"relative"},class:"row"},ge={style:{display:"inline-block",float:"right"}},me=["onClick","disabled"],he=["onClick"],ue={style:{display:"inline-block"}},ce=["onUpdate:modelValue"],be=["onUpdate:modelValue"],ye=["onUpdate:modelValue"],fe={style:{display:"inline-block"}},ve={style:{"margin-right":"6px","margin-left":"5px"}},we=["onClick","disabled"],xe=["onUpdate:modelValue"],_e=["onClick"],ke=["onUpdate:modelValue"],Ue=["onUpdate:modelValue"],Ve=["onUpdate:modelValue"],Ce=["onUpdate:modelValue"],Ae={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"10px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#86a0b3ff",position:"relative","text-align":"center"}},ze=["disabled"],Ie={style:{color:"#38454dff"}},Se=["disabled"];function Me(e,t,u,y,Ne,d){var x,_,k,U,V,C,A,z,I,S,M,N,$,D,P,B,R,T;return g(),r("div",O,[s("div",G,[J,s("div",null,[s("div",Q,[s("button",{type:"",onClick:t[0]||(t[0]=o=>(e.page--,d.list())),style:{float:"left","margin-top":"-5px"},class:"dark",disabled:e.page<=1}," Previous page ",8,W),s("span",X," Page "+p(e.page)+" of "+p(Math.ceil(((x=e.response)==null?void 0:x.total)/((_=e.response)==null?void 0:_.limit)))+" ("+p((k=e.response)==null?void 0:k.skip)+" - "+p(((U=e.response)==null?void 0:U.skip)+((C=(V=e.response)==null?void 0:V.data)==null?void 0:C.length))+" of "+p((A=e.response)==null?void 0:A.total)+") ",1),s("button",{type:"",onClick:t[1]||(t[1]=o=>(e.page++,d.list())),style:{float:"right","margin-top":"-5px"},class:"dark",disabled:e.page>=Math.ceil(((z=e.response)==null?void 0:z.total)/((I=e.response)==null?void 0:I.limit))}," Next page ",8,Y)]),s("div",Z,[s("div",ee,[oe,i(),a(s("input",{placeholder:"email","onUpdate:modelValue":t[2]||(t[2]=o=>e.email=o)},null,512),[[n,e.email]]),i(),a(s("input",{placeholder:"password","onUpdate:modelValue":t[3]||(t[3]=o=>e.password=o),type:"password"},null,512),[[n,e.password]]),s("div",se,[(g(!0),r(v,null,w(e.permissions,(o,m)=>(g(),r("div",te,[s("button",{onClick:h=>e.permissions.splice(m,1),style:{display:"inline-block"},disabled:e.permissions.length<=1}," Remove ",8,ie),i(),a(s("input",{placeholder:"permissions","onUpdate:modelValue":h=>e.permissions[m]=h,style:{"margin-right":"5px"}},null,8,le),[[n,e.permissions[m]]]),i(),!e.permissions.length||m===e.permissions.length-1?(g(),r("button",{key:0,onClick:t[4]||(t[4]=h=>e.permissions.push("")),style:{display:"inline-block"}}," Add ")):F("",!0)]))),256))]),i(),a(s("input",{placeholder:"locale","onUpdate:modelValue":t[5]||(t[5]=o=>e.locale=o)},null,512),[[n,e.locale]]),i(),a(s("input",{placeholder:"owner group","onUpdate:modelValue":t[6]||(t[6]=o=>e.owner_group=o)},null,512),[[n,e.owner_group]]),i(),de,i(),ae]),s("div",ne,[s("button",{onClick:t[7]||(t[7]=o=>d.create({email:e.email,password:e.password,locale:e.locale,permissions:e.permissions,owner_group:e.owner_group}))}," Create ")])]),s("div",pe,[a(s("input",{style:{"margin-right":"5px",width:"calc(100% - 110px)","padding-top":"15px","padding-bottom":"15px"},"onUpdate:modelValue":t[8]||(t[8]=o=>e.search=o),placeholder:"search...",onKeydown:t[9]||(t[9]=q((...o)=>d.list&&d.list(...o),["enter"]))},null,544),[[n,e.search]]),i(),s("button",{onClick:t[10]||(t[10]=(...o)=>d.list&&d.list(...o)),class:"dark",style:{"padding-top":"15px","padding-bottom":"15px",width:"100px"}}," Search ")]),(g(!0),r(v,null,w(d.users,o=>{var m,h,j;return g(),r("div",re,[s("div",ge,[s("button",{onClick:l=>d.remove(o),class:"red",style:{"margin-right":"2px"},disabled:((h=(m=d.user)==null?void 0:m.value)==null?void 0:h._id)===o._id||((j=d.user)==null?void 0:j._id)===o._id}," Remove ",8,me),i(),s("button",{onClick:l=>d.save(o),class:"green"}," Save ",8,he)]),s("div",ue,[a(s("input",{placeholder:"ID","onUpdate:modelValue":l=>o._id=l,readonly:""},null,8,ce),[[n,o._id]]),i(),a(s("input",{placeholder:"email","onUpdate:modelValue":l=>o.email=l},null,8,be),[[n,o.email]]),i(),a(s("input",{placeholder:"password","onUpdate:modelValue":l=>o.password=l,type:"password"},null,8,ye),[[n,o.password]]),s("div",fe,[(g(!0),r(v,null,w(o.permissions,(l,c)=>(g(),r("div",ve,[s("button",{onClick:f=>o.permissions.splice(c,1),style:{display:"inline-block"},disabled:o.permissions.length<=1}," Remove ",8,we),i(),a(s("input",{placeholder:"permissions","onUpdate:modelValue":f=>o.permissions[c]=f,style:{"margin-right":"5px"}},null,8,xe),[[n,o.permissions[c]]]),i(),!o.permissions.length||c===o.permissions.length-1?(g(),r("button",{key:0,onClick:f=>o.permissions.push(""),style:{display:"inline-block"}}," Add ",8,_e)):F("",!0)]))),256))]),i(),a(s("input",{placeholder:"locale","onUpdate:modelValue":l=>o.locale=l},null,8,ke),[[n,o.locale]]),i(),a(s("input",{placeholder:"owner group","onUpdate:modelValue":l=>o.owner_group=l},null,8,Ue),[[n,o.owner_group]]),i(),a(s("input",{placeholder:"Updated","onUpdate:modelValue":l=>o.updatedAt=l,readonly:"",style:{width:"185px"}},null,8,Ve),[[n,o.updatedAt]]),i(),a(s("input",{placeholder:"Created","onUpdate:modelValue":l=>o.createdAt=l,readonly:"",style:{width:"185px"}},null,8,Ce),[[n,o.createdAt]])])])}),256)),s("div",Ae,[s("button",{onClick:t[11]||(t[11]=o=>(e.page--,d.list())),style:{float:"left","margin-top":"-5px"},class:"dark",disabled:e.page<=1}," Previous page ",8,ze),s("span",Ie," Page "+p(e.page)+" of "+p(Math.ceil(((S=e.response)==null?void 0:S.total)/((M=e.response)==null?void 0:M.limit)))+" ("+p((N=e.response)==null?void 0:N.skip)+" - "+p((($=e.response)==null?void 0:$.skip)+((P=(D=e.response)==null?void 0:D.data)==null?void 0:P.length))+" of "+p((B=e.response)==null?void 0:B.total)+") ",1),s("button",{type:"",onClick:t[12]||(t[12]=o=>(e.page++,d.list())),style:{float:"right","margin-top":"-5px"},class:"dark",disabled:e.page>=Math.ceil(((R=e.response)==null?void 0:R.total)/((T=e.response)==null?void 0:T.limit))}," Next page ",8,Se)])])])])}const De=K(L,[["render",Me],["__scopeId","data-v-d427c2d6"]]);export{De as default};
