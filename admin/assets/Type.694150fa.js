import{_ as w,m as C,c as l,a as o,t as u,w as g,v as h,b as V,e as v,h as U,q as R,F as b,r as m,s as j,d as x,o as d,u as f}from"./index.bfed0d36.js";import"https://cdn.jsdelivr.net/npm/@feathersjs/client@5.0.0-pre.28/+esm";import"https://cdn.jsdelivr.net/npm/socket.io-client@4.5.1/+esm";console.log("look here",C);const D={inject:["io"],methods:{toggle(){this.custom=!this.custom},async list(){let t=await this.io.service("types/any").find({query:{slug:this.type,$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});this.response=t,this.listRow()},async listRow(){let t={$or:[]};this.fields.forEach(a=>{if(this.instance.fields[a].type==="String"){let c={};c[a]={$regex:this.search},t.$or.push(c)}}),(!t.$or.length||!this.search)&&delete t.$or;let i=await this.io.service("types/"+this.type).find({query:{...t,$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});this.responseRow=i},async create(t){await this.io.service("types/"+this.type).create(t),this.clear(),this.list()},async save(t){await this.io.service("types/"+this.type).patch(t._id,t),this.list()},async remove(t){await this.io.service("types/"+this.type).remove(t._id),this.list()},clear(){this.obj={}}},computed:{instance(){var t;return((t=this.response)==null?void 0:t.data[0])||{}},fields(){var t,i;return(t=this.instance)!=null&&t.fields?Object.keys((i=this.instance)==null?void 0:i.fields):[]},table(){var t;return((t=this.responseRow)==null?void 0:t.data)||[]},decodedContent(){var t,i,a;if((t=this.response)!=null&&t.data.length){let c=(a=(i=this.response)==null?void 0:i.data[0])==null?void 0:a.dashboard;return new TextDecoder().decode(c)}return""},loadedComponent(){let t=URL.createObjectURL(new Blob([this.decodedContent],{type:"text/javascript"}));return C(async()=>await j(()=>import(t),[]))}},data:()=>({obj:{},limit:25,page:1,response:null,responseRow:null,search:"",custom:!0}),props:{type:{type:String,default:"sites"}},created(){this.list()},watch:{type(){this.list()}}},z={style:{display:"flex",height:"100%","font-family":"Arial, Helvetica, sans-serif"}},A={style:{width:"100%","flex-grow":"1",flex:"1",height:"100%",overflow:"auto","background-color":"#edebebff"}},S={style:{"margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},L={style:{color:"#2b2b2bff"}},P=x(),T=x(),B={key:0,style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"60px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#ebf2f5ff"}},N=["disabled"],q=["disabled"],E={key:1,style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#ffffffff"}},F={key:2},O={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"60px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff"}},I={style:{display:"inline-block"}},K=o("input",{style:{"margin-right":"5px"},placeholder:"id",readonly:""},null,-1),H=["onUpdate:modelValue","placeholder"],M={style:{display:"inline-block",float:"right"}},G={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff",position:"relative","text-align":"center"}},J={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#83b5c9ff",position:"relative"}},Q={style:{display:"inline-block",float:"right"}},W=["onClick"],X=["onClick"],Y=x(),Z={style:{display:"inline-block",width:"100%"}},$={style:{"font-size":"13px",position:"absolute",top:"3px",color:"#1c1c1cff","font-weight":"bold"}},tt={style:{position:"absolute",top:"3px","font-size":"13px",right:"21px",color:"#1c1c1cff","font-weight":"bold"}},et=["onUpdate:modelValue"],it=["onUpdate:modelValue","placeholder"],ot=["onUpdate:modelValue","placeholder"],rt=["onUpdate:modelValue","placeholder"],st=x(),dt={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff",position:"relative","text-align":"center"}};function lt(t,i,a,c,nt,r){var y,_;return d(),l("div",z,[o("div",A,[o("div",S,[o("h2",L,u((_=(y=r.instance)==null?void 0:y.title)==null?void 0:_.en),1),P,o("button",{type:"",onClick:i[0]||(i[0]=(...e)=>r.list&&r.list(...e)),style:{float:"right"}}," Refresh "),g(o("input",{style:{"margin-right":"5px",width:"167px",float:"right"},"onUpdate:modelValue":i[1]||(i[1]=e=>t.search=e),placeholder:"Filter",onKeydown:i[2]||(i[2]=V((...e)=>r.list&&r.list(...e),["enter"]))},null,544),[[h,t.search]])]),T,r.decodedContent?(d(),l("div",B,[o("button",{type:"",onClick:i[3]||(i[3]=(...e)=>r.toggle&&r.toggle(...e)),disabled:t.custom}," Custom view ",8,N),o("button",{type:"",onClick:i[4]||(i[4]=(...e)=>r.toggle&&r.toggle(...e)),disabled:!t.custom}," Default view ",8,q)])):v("",!0),t.custom&&r.decodedContent?(d(),l("div",E,[(d(),U(R(r.loadedComponent)))])):(d(),l("div",F,[o("div",O,[o("div",I,[K,(d(!0),l(b,null,m(r.fields,e=>g((d(),l("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":s=>t.obj[e]=s,placeholder:e},null,8,H)),[[h,t.obj[e]]])),256))]),o("div",M,[o("button",{type:"",onClick:i[5]||(i[5]=e=>r.create(t.obj))}," Create ")])]),o("div",G,[o("button",{type:"",onClick:i[6]||(i[6]=e=>(t.page--,r.list())),style:{float:"left"}}," Previous page "),o("span",null," Page "+u(t.page),1),o("button",{type:"",onClick:i[7]||(i[7]=e=>(t.page++,r.list())),style:{float:"right"}}," Next page ")]),(d(!0),l(b,null,m(r.table,e=>(d(),l("div",J,[o("div",Q,[o("button",{type:"",style:{"margin-right":"10px"},onClick:s=>r.save(e)}," Save ",8,W),o("button",{type:"",onClick:s=>r.remove(e)}," Remove ",8,X)]),Y,o("div",Z,[o("div",null,[o("span",$," Created "+u(new Date(e.createdAt).toLocaleString()),1),o("span",tt," Updated "+u(new Date(e.updatedAt).toLocaleString()),1)]),g(o("input",{placeholder:"ID",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>e._id=s,readonly:""},null,8,et),[[h,e._id]]),(d(!0),l(b,null,m(r.fields,s=>{var n;return g((d(),l("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":p=>e[s]=p,placeholder:s},null,8,it)),[[h,e[s]],[f,(n=e[s])==null?void 0:n.en]])}),256)),(d(!0),l(b,null,m(r.fields,s=>{var n;return g((d(),l("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":p=>e[s]=p,placeholder:s},null,8,ot)),[[h,e[s]],[f,(n=e[s])==null?void 0:n.no]])}),256)),(d(!0),l(b,null,m(r.fields,s=>{var n,p;return g((d(),l("input",{style:{"margin-right":"5px"},"onUpdate:modelValue":k=>e[s]=k,placeholder:s},null,8,rt)),[[h,e[s]],[f,!((n=e[s])!=null&&n.en)&&!((p=e[s])!=null&&p.no)]])}),256)),st,v("",!0)])]))),256)),o("div",dt,[o("button",{type:"",onClick:i[8]||(i[8]=e=>(t.page--,r.list())),style:{float:"left"}}," Previous page "),o("span",null," Page "+u(t.page),1),o("button",{type:"",onClick:i[9]||(i[9]=e=>(t.page++,r.list())),style:{float:"right"}}," Next page ")])]))])])}const ht=w(D,[["render",lt]]);export{ht as default};
