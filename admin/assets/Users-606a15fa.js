import{_ as B,c as r,a as s,t as p,b as l,w as a,v as n,F as b,r as c,d as R,o as g,e as j,p as T,f as F}from"./index-b9d1c481.js";const K={inject:["io","user"],methods:{async create(e){await this.io.service("users").create(e),this.clear(),this.list()},async list(){let e=await this.io.service("users").find({query:{email:{$search:this.search},$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});this.response=e},async save(e){let t=Object.assign({},e);if(t.password||delete t.password,t.password&&t.password.length<6){alert("Too short password!");return}let y=await this.io.service("users").patch(t._id,t);Object.assign(e,y)},async remove(e){await this.io.service("users").remove(e._id),this.list()},clear(){this.email="",this.owner_group="",this.password="",this.locale="",this.permissions=["user"]}},created(){this.list()},computed:{users(){var e;return((e=this.response)==null?void 0:e.data)||[]}},data:()=>({email:"",owner_group:"",password:"",locale:"",owner_group:"",permissions:["user"],response:null,search:"",limit:25,page:1})},h=e=>(T("data-v-6d2a2b0b"),e=e(),F(),e),O={style:{display:"flex",height:"100%","font-family":"Arial, Helvetica, sans-serif"}},q={style:{width:"100%","flex-grow":"1",flex:"1",height:"100%",overflow:"auto","background-color":"#edebebff"},class:"editor"},E=h(()=>s("div",{style:{"margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},[s("h2",{style:{color:"#2b2b2bff","font-weight":"100","font-size":"35px"}}," Users ")],-1)),H={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"15px","padding-bottom":"15px","margin-left":"20px","margin-right":"20px","background-color":"#86a0b3ff",position:"relative","text-align":"center","margin-top":"10px","border-top-left-radius":"3px","border-top-right-radius":"3px"}},L=["disabled"],G={style:{color:"#38454dff"}},J=["disabled"],Q={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#86a0b3ff","margin-bottom":"10px"},class:"row"},W={style:{display:"inline-block"}},X=h(()=>s("input",{placeholder:"ID",readonly:"readonly"},null,-1)),Y={style:{display:"inline-block"}},Z={style:{"margin-right":"6px","margin-left":"5px"}},ee=["onClick","disabled"],oe=["onUpdate:modelValue"],se=h(()=>s("input",{placeholder:"Updated",readonly:"readonly"},null,-1)),te=h(()=>s("input",{placeholder:"Created",readonly:"readonly"},null,-1)),ie={style:{display:"inline-block",float:"right"}},le={style:{"box-sizing":"border-box","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","background-color":"#87acccff","border-top-left-radius":"3px","border-top-right-radius":"3px"},class:"row"},ae={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"0px","margin-bottom":"0px",position:"relative"},class:"row"},ne={style:{display:"inline-block",float:"right"}},de=["onClick","disabled"],pe=["onClick"],re={style:{display:"inline-block"}},ge=["onUpdate:modelValue"],me=["onUpdate:modelValue"],he=["onUpdate:modelValue"],ue={style:{display:"inline-block"}},be={style:{"margin-right":"6px","margin-left":"5px"}},ce=["onClick","disabled"],ye=["onUpdate:modelValue"],fe=["onClick"],ve=["onUpdate:modelValue"],we=["onUpdate:modelValue"],xe=["onUpdate:modelValue"],ke=["onUpdate:modelValue"],_e={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"10px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#86a0b3ff",position:"relative","text-align":"center"}},Ue=["disabled"],Ve={style:{color:"#38454dff"}},Ce=["disabled"];function Ae(e,t,y,ze,Ie,d){var f,v,w,x,k,_,U,V,C,A,z,I,S,$,M,N,D,P;return g(),r("div",O,[s("div",q,[E,s("div",null,[s("div",H,[s("button",{type:"",onClick:t[0]||(t[0]=o=>(e.page--,d.list())),style:{float:"left","margin-top":"-5px"},class:"dark",disabled:e.page<=1}," Previous page ",8,L),s("span",G," Page "+p(e.page)+" of "+p(Math.ceil(((f=e.response)==null?void 0:f.total)/((v=e.response)==null?void 0:v.limit)))+" ("+p((w=e.response)==null?void 0:w.skip)+" - "+p(((x=e.response)==null?void 0:x.skip)+((_=(k=e.response)==null?void 0:k.data)==null?void 0:_.length))+" of "+p((U=e.response)==null?void 0:U.total)+") ",1),s("button",{type:"",onClick:t[1]||(t[1]=o=>(e.page++,d.list())),style:{float:"right","margin-top":"-5px"},class:"dark",disabled:e.page>=Math.ceil(((V=e.response)==null?void 0:V.total)/((C=e.response)==null?void 0:C.limit))}," Next page ",8,J)]),s("div",Q,[s("div",W,[X,l(),a(s("input",{placeholder:"email","onUpdate:modelValue":t[2]||(t[2]=o=>e.email=o)},null,512),[[n,e.email]]),l(),a(s("input",{placeholder:"password","onUpdate:modelValue":t[3]||(t[3]=o=>e.password=o),type:"password"},null,512),[[n,e.password]]),s("div",Y,[(g(!0),r(b,null,c(e.permissions,(o,i)=>(g(),r("div",Z,[s("button",{onClick:m=>e.permissions.splice(i,1),style:{display:"inline-block"},disabled:e.permissions.length<=1}," Remove ",8,ee),l(),a(s("input",{placeholder:"permissions","onUpdate:modelValue":m=>e.permissions[i]=m,style:{"margin-right":"5px"}},null,8,oe),[[n,e.permissions[i]]]),!e.permissions.length||i===e.permissions.length-1?(g(),r("button",{key:0,onClick:t[4]||(t[4]=m=>e.permissions.push("")),style:{display:"inline-block"}}," Add ")):j("",!0)]))),256))]),l(),a(s("input",{placeholder:"locale","onUpdate:modelValue":t[5]||(t[5]=o=>e.locale=o)},null,512),[[n,e.locale]]),l(),a(s("input",{placeholder:"owner group","onUpdate:modelValue":t[6]||(t[6]=o=>e.owner_group=o)},null,512),[[n,e.owner_group]]),l(),se,l(),te]),s("div",ie,[s("button",{onClick:t[7]||(t[7]=o=>d.create({email:e.email,password:e.password,locale:e.locale,permissions:e.permissions,owner_group:e.owner_group}))}," Create ")])]),s("div",le,[a(s("input",{style:{"margin-right":"5px",width:"calc(100% - 110px)","padding-top":"15px","padding-bottom":"15px"},"onUpdate:modelValue":t[8]||(t[8]=o=>e.search=o),placeholder:"search...",onKeydown:t[9]||(t[9]=R((...o)=>d.list&&d.list(...o),["enter"]))},null,544),[[n,e.search]]),l(),s("button",{onClick:t[10]||(t[10]=(...o)=>d.list&&d.list(...o)),class:"dark",style:{"padding-top":"15px","padding-bottom":"15px",width:"100px"}}," Search ")]),(g(!0),r(b,null,c(d.users,o=>(g(),r("div",ae,[s("div",ne,[s("button",{onClick:i=>d.remove(o),class:"red",style:{"margin-right":"2px"},disabled:d.user.value._id===o._id}," Remove ",8,de),l(),s("button",{onClick:i=>d.save(o),class:"green"}," Save ",8,pe)]),s("div",re,[a(s("input",{placeholder:"ID","onUpdate:modelValue":i=>o._id=i,readonly:""},null,8,ge),[[n,o._id]]),l(),a(s("input",{placeholder:"email","onUpdate:modelValue":i=>o.email=i},null,8,me),[[n,o.email]]),l(),a(s("input",{placeholder:"password","onUpdate:modelValue":i=>o.password=i,type:"password"},null,8,he),[[n,o.password]]),s("div",ue,[(g(!0),r(b,null,c(o.permissions,(i,m)=>(g(),r("div",be,[s("button",{onClick:u=>o.permissions.splice(m,1),style:{display:"inline-block"},disabled:o.permissions.length<=1}," Remove ",8,ce),l(),a(s("input",{placeholder:"permissions","onUpdate:modelValue":u=>o.permissions[m]=u,style:{"margin-right":"5px"}},null,8,ye),[[n,o.permissions[m]]]),!o.permissions.length||m===o.permissions.length-1?(g(),r("button",{key:0,onClick:u=>o.permissions.push(""),style:{display:"inline-block"}}," Add ",8,fe)):j("",!0)]))),256))]),l(),a(s("input",{placeholder:"locale","onUpdate:modelValue":i=>o.locale=i},null,8,ve),[[n,o.locale]]),l(),a(s("input",{placeholder:"owner group","onUpdate:modelValue":i=>o.owner_group=i},null,8,we),[[n,o.owner_group]]),l(),a(s("input",{placeholder:"Updated","onUpdate:modelValue":i=>o.updatedAt=i,readonly:""},null,8,xe),[[n,o.updatedAt]]),a(s("input",{placeholder:"Created","onUpdate:modelValue":i=>o.createdAt=i,readonly:""},null,8,ke),[[n,o.createdAt]])])]))),256)),s("div",_e,[s("button",{onClick:t[11]||(t[11]=o=>(e.page--,d.list())),style:{float:"left","margin-top":"-5px"},class:"dark",disabled:e.page<=1}," Previous page ",8,Ue),s("span",Ve," Page "+p(e.page)+" of "+p(Math.ceil(((A=e.response)==null?void 0:A.total)/((z=e.response)==null?void 0:z.limit)))+" ("+p((I=e.response)==null?void 0:I.skip)+" - "+p(((S=e.response)==null?void 0:S.skip)+((M=($=e.response)==null?void 0:$.data)==null?void 0:M.length))+" of "+p((N=e.response)==null?void 0:N.total)+") ",1),s("button",{type:"",onClick:t[12]||(t[12]=o=>(e.page++,d.list())),style:{float:"right","margin-top":"-5px"},class:"dark",disabled:e.page>=Math.ceil(((D=e.response)==null?void 0:D.total)/((P=e.response)==null?void 0:P.limit))}," Next page ",8,Ce)])])])])}const $e=B(K,[["render",Ae],["__scopeId","data-v-6d2a2b0b"]]);export{$e as default};
