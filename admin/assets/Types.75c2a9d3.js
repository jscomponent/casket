import{_ as g,c as n,a as l,w as i,v as d,b as h,F as m,r as c,t as p,d as a,o as u}from"./index.6e3bcd89.js";import"https://cdn.jsdelivr.net/npm/@feathersjs/client@5.0.0-pre.28/+esm";import"https://cdn.jsdelivr.net/npm/socket.io-client@4.5.1/+esm";const f={inject:["io","user"],methods:{async create(t){let e=Object.assign({},t);e.fields=e.fields?JSON.parse(e.fields):{},e.roles=e.roles?JSON.parse(e.roles):{},e.instance=new TextEncoder().encode(e.instance).buffer,e.dashboard=new TextEncoder().encode(e.dashboard).buffer,await this.io.service("types/any").create(e),this.clear(),this.list()},async list(){let t=await this.io.service("types/any").find({query:{slug:{$search:this.search},$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});t.data=t.data.map(e=>(e.fields&&(e.fields=JSON.stringify(e.fields)),e.roles&&(e.roles=JSON.stringify(e.roles)),e.instance=new TextDecoder().decode(e.instance),e.dashboard=new TextDecoder().decode(e.dashboard),e)),this.$emit("list"),this.response=t},async save(t){await this.io.service("types/any").patch(t._id,{title:t.title,slug:t.slug,status:t.status,fields:t.fields?JSON.parse(t.fields):{},roles:t.roles?JSON.parse(t.roles):{},instance:new TextEncoder().encode(t==null?void 0:t.instance).buffer,dashboard:new TextEncoder().encode(t==null?void 0:t.dashboard).buffer,owner:t.owner,owner_group:t.owner_group});let e=await this.io.service("types/any").get(t._id);e.fields&&(e.fields=JSON.stringify(e.fields)),e.roles&&(e.roles=JSON.stringify(e.roles)),e.instance=new TextDecoder().decode(e.instance),e.dashboard=new TextDecoder().decode(e.dashboard),Object.assign(t,e)},async remove(t){await this.io.service("types/any").remove(t._id),this.list()},clear(){this.title="",this.slug="",this.status="",this.fields="",this.roles="",this.owner="",this.owner_group=""}},created(){this.list()},computed:{types(){var t;return((t=this.response)==null?void 0:t.data)||[]}},data:()=>({title:"",slug:"",status:"",fields:"",roles:"",owner:"",owner_group:"",limit:25,page:1,response:null,search:""}),emits:["list"]},b={style:{display:"flex",height:"100%","font-family":"Arial, Helvetica, sans-serif"}},x={style:{width:"100%","flex-grow":"1",flex:"1",height:"100%",overflow:"auto","background-color":"#edebebff"}},w={style:{"margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},_=l("h2",{style:{color:"#2b2b2bff"}}," Types ",-1),v=a(),y=a(),V={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"60px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff"}},U={style:{display:"inline-block"}},k={style:{display:"inline-block",float:"right"}},T={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#83b5c9ff",position:"relative"}},S={style:{display:"inline-block",float:"right"}},N=["onClick"],C=["onClick"],O=a(),D={style:{display:"inline-block",width:"100%"}},J={style:{"font-size":"12px",position:"absolute",top:"5px",color:"#1c1c1cff"}},z={style:{position:"absolute",top:"5px","font-size":"12px",right:"21px",color:"#1c1c1cff"}},E=a(),j=["onUpdate:modelValue"],A=["onUpdate:modelValue"],F=["onUpdate:modelValue"],$=["onUpdate:modelValue"],B=["onUpdate:modelValue"],L=["onUpdate:modelValue"],R={style:{"padding-top":"10px"}},K=l("label",null," Fields ",-1),P=["onUpdate:modelValue"],q={style:{"padding-top":"10px"}},H=l("label",null," Roles ",-1),I=["onUpdate:modelValue"],M={style:{"padding-top":"10px"}},G=l("label",null," Instance ",-1),Q=["onUpdate:modelValue"],W={style:{"padding-top":"10px"}},X=l("label",null," Dashboard ",-1),Y=["onUpdate:modelValue"],Z={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff",position:"relative","text-align":"center"}};function ee(t,e,te,oe,le,r){return u(),n("div",b,[l("div",x,[l("div",w,[_,v,l("button",{type:"",onClick:e[0]||(e[0]=(...o)=>r.list&&r.list(...o)),style:{float:"right"}}," Refresh "),i(l("input",{style:{"margin-right":"5px",width:"167px",float:"right"},"onUpdate:modelValue":e[1]||(e[1]=o=>t.search=o),placeholder:"Filter",onKeydown:e[2]||(e[2]=h((...o)=>r.list&&r.list(...o),["enter"]))},null,544),[[d,t.search]])]),y,l("div",V,[l("div",U,[i(l("input",{placeholder:"title",style:{"margin-right":"5px"},"onUpdate:modelValue":e[3]||(e[3]=o=>t.title=o)},null,512),[[d,t.title]]),i(l("input",{placeholder:"slug",style:{"margin-right":"5px"},"onUpdate:modelValue":e[4]||(e[4]=o=>t.slug=o)},null,512),[[d,t.slug]]),i(l("input",{placeholder:"status",style:{"margin-right":"5px"},"onUpdate:modelValue":e[5]||(e[5]=o=>t.status=o)},null,512),[[d,t.status]]),i(l("input",{placeholder:"owner",style:{"margin-right":"5px"},"onUpdate:modelValue":e[6]||(e[6]=o=>t.owner=o)},null,512),[[d,t.owner]]),i(l("input",{placeholder:"owner group",style:{"margin-right":"5px"},"onUpdate:modelValue":e[7]||(e[7]=o=>t.owner_group=o)},null,512),[[d,t.owner_group]]),i(l("textarea",{placeholder:"fields","onUpdate:modelValue":e[8]||(e[8]=o=>t.fields=o)},null,512),[[d,t.fields]]),i(l("textarea",{placeholder:"roles","onUpdate:modelValue":e[9]||(e[9]=o=>t.roles=o)},null,512),[[d,t.roles]])]),l("div",k,[l("button",{type:"",onClick:e[10]||(e[10]=o=>r.create({title:t.title,slug:t.slug,status:t.status,fields:t.fields,roles:t.roles,owner:t.owner,owner_group:t.owner_group}))}," Create ")])]),(u(!0),n(m,null,c(r.types,o=>(u(),n("div",T,[l("div",S,[l("button",{type:"",style:{"margin-right":"10px"},onClick:s=>r.save(o)}," Save ",8,N),l("button",{type:"",onClick:s=>r.remove(o)}," Remove ",8,C)]),O,l("div",D,[l("div",null,[l("span",J," Created "+p(new Date(o.createdAt).toLocaleString()),1),l("span",z," Updated "+p(new Date(o.updatedAt).toLocaleString()),1)]),E,i(l("input",{placeholder:"title",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>o.title.en=s},null,8,j),[[d,o.title.en]]),i(l("input",{placeholder:"slug",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>o.slug=s},null,8,A),[[d,o.slug]]),i(l("input",{placeholder:"status",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>o.status=s},null,8,F),[[d,o.status]]),i(l("input",{placeholder:"owner",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>o.owner=s},null,8,$),[[d,o.owner]]),i(l("input",{placeholder:"owner group",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>o.owner_group=s},null,8,B),[[d,o.owner_group]]),i(l("input",{placeholder:"title",style:{"margin-right":"5px"},"onUpdate:modelValue":s=>o._id=s,readonly:""},null,8,L),[[d,o._id]]),l("div",R,[K,i(l("textarea",{style:{width:"100%"},placeholder:"fields","onUpdate:modelValue":s=>o.fields=s},null,8,P),[[d,o.fields]])]),l("div",q,[H,i(l("textarea",{style:{width:"100%"},placeholder:"roles","onUpdate:modelValue":s=>o.roles=s},null,8,I),[[d,o.roles]])]),l("div",M,[G,i(l("textarea",{style:{width:"100%"},placeholder:"instance","onUpdate:modelValue":s=>o.instance=s},null,8,Q),[[d,o.instance]])]),l("div",W,[X,i(l("textarea",{style:{width:"100%"},placeholder:"dashboard","onUpdate:modelValue":s=>o.dashboard=s},null,8,Y),[[d,o.dashboard]])])])]))),256)),l("div",Z,[l("button",{type:"",onClick:e[11]||(e[11]=o=>(t.page--,r.list())),style:{float:"left"}}," Previous page "),l("span",null," Page "+p(t.page),1),l("button",{type:"",onClick:e[12]||(e[12]=o=>(t.page++,r.list())),style:{float:"right"}}," Next page ")])])])}var re=g(f,[["render",ee]]);export{re as default};
