import{_ as y,c as n,a as t,w as s,v as r,b,F as u,r as c,t as x,d as p,o as d}from"./index.ef9aaa45.js";import"https://cdn.jsdelivr.net/npm/@feathersjs/client@5.0.0-pre.28/+esm";import"https://cdn.jsdelivr.net/npm/socket.io-client@4.5.1/+esm";const _={inject:["io","user"],methods:{async create(o){await this.io.service("users").create(o),this.clear(),this.list()},async list(){let o=await this.io.service("users").find({query:{email:{$search:this.search},$limit:this.limit,$skip:(this.page-1)*this.limit,$sort:{createdAt:-1}}});this.response=o},async save(o){let i=Object.assign({},o);if(i.password||delete i.password,i.password&&i.password.length<6){alert("Too short password!");return}let m=await this.io.service("users").patch(i._id,i);Object.assign(o,m)},async remove(o){await this.io.service("users").remove(o._id),this.list()},clear(){this.email="",this.owner_group="",this.password="",this.locale="",this.permission=""}},created(){this.list()},computed:{users(){var o;return((o=this.response)==null?void 0:o.data)||[]}},data:()=>({email:"",owner_group:"",password:"",locale:"",owner_group:"",permission:"",response:null,search:"",limit:25,page:1})},f={style:{display:"flex",height:"100%","font-family":"Arial, Helvetica, sans-serif"}},w={style:{width:"100%","flex-grow":"1",flex:"1",height:"100%",overflow:"auto","background-color":"#edebebff"}},v={style:{"margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},U=t("h2",{style:{color:"#2b2b2bff"}}," Users ",-1),k=p(),V=p(),C={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"60px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff"}},A={style:{display:"inline-block"}},$=t("input",{placeholder:"ID",style:{"margin-right":"5px"},readonly:"readonly"},null,-1),j=t("input",{placeholder:"Created",style:{"margin-right":"5px"},readonly:"readonly"},null,-1),z=t("input",{placeholder:"Updated",style:{"margin-right":"5px"},readonly:"readonly"},null,-1),B={style:{display:"inline-block",float:"right"}},D={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#83b5c9ff",position:"relative"}},F={style:{display:"inline-block"}},N=t("div",null,null,-1),R=p(),T=["onUpdate:modelValue"],K=["onUpdate:modelValue"],O=["onUpdate:modelValue"],P={style:{display:"inline-block",width:"223px"}},S=["onClick"],q=p(),E=["onUpdate:modelValue"],H=["onClick"],I=["onUpdate:modelValue"],L=["onUpdate:modelValue"],M=["onUpdate:modelValue"],G=["onUpdate:modelValue"],J={style:{display:"inline-block",float:"right"}},Q=["onClick"],W=["onClick","disabled"],X={style:{"box-sizing":"border-box",width:"calc(100% - 40px)","padding-left":"20px","padding-right":"20px","padding-top":"20px","padding-bottom":"20px","margin-left":"20px","margin-right":"20px","margin-top":"20px","margin-bottom":"20px","border-top-left-radius":"3px","border-top-right-radius":"3px","border-bottom-left-radius":"3px","border-bottom-right-radius":"3px","background-color":"#bacad1ff",position:"relative","text-align":"center"}};function Y(o,i,m,Z,ee,a){return d(),n("div",f,[t("div",w,[t("div",v,[U,k,t("button",{type:"",onClick:i[0]||(i[0]=(...e)=>a.list&&a.list(...e)),style:{float:"right"}}," Refresh "),s(t("input",{style:{"margin-right":"5px",width:"167px",float:"right"},"onUpdate:modelValue":i[1]||(i[1]=e=>o.search=e),placeholder:"Filter",onKeydown:i[2]||(i[2]=b((...e)=>a.list&&a.list(...e),["enter"]))},null,544),[[r,o.search]])]),V,t("div",C,[t("div",A,[$,s(t("input",{placeholder:"email",style:{"margin-right":"5px"},"onUpdate:modelValue":i[3]||(i[3]=e=>o.email=e)},null,512),[[r,o.email]]),s(t("input",{placeholder:"password",style:{"margin-right":"5px"},type:"password","onUpdate:modelValue":i[4]||(i[4]=e=>o.password=e)},null,512),[[r,o.password]]),s(t("input",{placeholder:"permissions",style:{"margin-right":"5px"},"onUpdate:modelValue":i[5]||(i[5]=e=>o.permission=e)},null,512),[[r,o.permission]]),s(t("input",{placeholder:"locale",style:{"margin-right":"5px"},"onUpdate:modelValue":i[6]||(i[6]=e=>o.locale=e)},null,512),[[r,o.locale]]),s(t("input",{placeholder:"owner group",style:{"margin-right":"5px"},"onUpdate:modelValue":i[7]||(i[7]=e=>o.owner_group=e)},null,512),[[r,o.owner_group]]),j,z]),t("div",B,[t("button",{type:"",onClick:i[8]||(i[8]=e=>a.create({email:o.email,password:o.password,locale:o.locale,permissions:[o.permission],owner_group:o.owner_group}))}," Create ")])]),(d(!0),n(u,null,c(a.users,e=>(d(),n("div",D,[t("div",F,[N,R,s(t("input",{placeholder:"email",style:{"margin-right":"5px"},"onUpdate:modelValue":l=>e._id=l,readonly:""},null,8,T),[[r,e._id]]),s(t("input",{placeholder:"email",style:{"margin-right":"5px"},"onUpdate:modelValue":l=>e.email=l},null,8,K),[[r,e.email]]),s(t("input",{placeholder:"password",style:{"margin-right":"5px"},type:"password","onUpdate:modelValue":l=>e.password=l},null,8,O),[[r,e.password]]),t("div",P,[(d(!0),n(u,null,c(e.permissions,(l,g)=>(d(),n("div",null,[t("button",{type:"",onClick:h=>e.permissions.splice(g,1),style:{float:"left"}}," Remove ",8,S),q,s(t("input",{placeholder:"permissions","onUpdate:modelValue":h=>e.permissions[g]=h},null,8,E),[[r,e.permissions[g]]])]))),256))]),t("button",{type:"",onClick:l=>e.permissions.push(""),style:{"margin-right":"5px"}}," Add ",8,H),s(t("input",{placeholder:"locale",style:{"margin-right":"5px"},"onUpdate:modelValue":l=>e.locale=l},null,8,I),[[r,e.locale]]),s(t("input",{placeholder:"owner group",style:{"margin-right":"5px"},"onUpdate:modelValue":l=>e.owner_group=l},null,8,L),[[r,e.owner_group]]),s(t("input",{placeholder:"email",style:{"margin-right":"5px"},"onUpdate:modelValue":l=>e.createdAt=l,readonly:"readonly"},null,8,M),[[r,e.createdAt]]),s(t("input",{placeholder:"email",style:{"margin-right":"5px"},"onUpdate:modelValue":l=>e.updatedAt=l,readonly:"readonly"},null,8,G),[[r,e.updatedAt]])]),t("div",J,[t("button",{type:"",style:{"margin-right":"10px"},onClick:l=>a.save(e)}," Save ",8,Q),t("button",{type:"",onClick:l=>a.remove(e),disabled:a.user.value._id===e._id}," Remove ",8,W)])]))),256)),t("div",X,[t("button",{type:"",onClick:i[9]||(i[9]=e=>(o.page--,a.list())),style:{float:"left"}}," Previous page "),t("span",null," Page "+x(o.page),1),t("button",{type:"",onClick:i[10]||(i[10]=e=>(o.page++,a.list())),style:{float:"right"}}," Next page ")])])])}const le=y(_,[["render",Y]]);export{le as default};
